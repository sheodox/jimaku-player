// ==UserScript==
// @name         字幕プレーヤー
// @namespace    https://github.com/sheodox
// @version      0.1.37
// @description  Study Japanese by using Japanese subtitles on VRV!
// @author       sheodox
// @match        https://static.vrv.co/vilos/player.html
// @match        https://static.crunchyroll.com/vilos-v2/web/vilos/player.html
// @grant        GM_getValue
// @grant        GM_setValue
// ==/UserScript==

!function(t){var e={};function n(c){if(e[c])return e[c].exports;var s=e[c]={i:c,l:!1,exports:{}};return t[c].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,c){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:c})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var c=Object.create(null);if(n.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(c,s,function(e){return t[e]}.bind(null,s));return c},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e,n){"use strict";function c(){}n.d(e,"a",(function(){return Nt})),n.d(e,"b",(function(){return j})),n.d(e,"c",(function(){return bt})),n.d(e,"d",(function(){return U})),n.d(e,"e",(function(){return v})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return H})),n.d(e,"h",(function(){return ct})),n.d(e,"i",(function(){return xt})),n.d(e,"j",(function(){return f})),n.d(e,"k",(function(){return et})),n.d(e,"l",(function(){return K})),n.d(e,"m",(function(){return Ct})),n.d(e,"n",(function(){return Ht})),n.d(e,"o",(function(){return wt})),n.d(e,"p",(function(){return kt})),n.d(e,"q",(function(){return _t})),n.d(e,"r",(function(){return w})),n.d(e,"s",(function(){return $})),n.d(e,"t",(function(){return k})),n.d(e,"u",(function(){return E})),n.d(e,"v",(function(){return Et})),n.d(e,"w",(function(){return J})),n.d(e,"x",(function(){return d})),n.d(e,"y",(function(){return St})),n.d(e,"z",(function(){return mt})),n.d(e,"A",(function(){return s})),n.d(e,"B",(function(){return Mt})),n.d(e,"C",(function(){return y})),n.d(e,"D",(function(){return b})),n.d(e,"E",(function(){return V})),n.d(e,"F",(function(){return x})),n.d(e,"G",(function(){return Pt})),n.d(e,"H",(function(){return c})),n.d(e,"I",(function(){return O})),n.d(e,"J",(function(){return tt})),n.d(e,"K",(function(){return Z})),n.d(e,"L",(function(){return qt})),n.d(e,"M",(function(){return A})),n.d(e,"N",(function(){return g})),n.d(e,"O",(function(){return l})),n.d(e,"P",(function(){return a})),n.d(e,"Q",(function(){return T})),n.d(e,"R",(function(){return z})),n.d(e,"S",(function(){return M})),n.d(e,"T",(function(){return N})),n.d(e,"U",(function(){return R})),n.d(e,"V",(function(){return q})),n.d(e,"W",(function(){return u})),n.d(e,"X",(function(){return C})),n.d(e,"Y",(function(){return S})),n.d(e,"Z",(function(){return _})),n.d(e,"ab",(function(){return I})),n.d(e,"bb",(function(){return vt})),n.d(e,"cb",(function(){return yt})),n.d(e,"db",(function(){return Vt})),n.d(e,"eb",(function(){return P}));const s=t=>t;function o(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function i(){return Object.create(null)}function l(t){t.forEach(r)}function b(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t,...e){if(null==t)return c;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function d(t){let e;return u(t,t=>e=t)(),e}function f(t,e,n){t.$$.on_destroy.push(u(e,n))}function j(t){return t&&b(t.destroy)?t.destroy:c}const p="undefined"!=typeof window;let O=p?()=>window.performance.now():()=>Date.now(),g=p?t=>requestAnimationFrame(t):c;const h=new Set;function m(t){h.forEach(e=>{e.c(t)||(h.delete(e),e.f())}),0!==h.size&&g(m)}function x(t){let e;return 0===h.size&&g(m),{promise:new Promise(n=>{h.add(e={c:t,f:n})}),abort(){h.delete(e)}}}function v(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function w(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function C(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function S(t){return document.createTextNode(t)}function q(){return S(" ")}function E(){return S("")}function V(t,e,n,c){return t.addEventListener(e,n,c),()=>t.removeEventListener(e,n,c)}function A(t){return function(e){return e.preventDefault(),t.call(this,e)}}function H(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function P(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function _(t){return""===t?void 0:+t}function M(t,e){e=""+e,t.data!==e&&(t.data=e)}function N(t,e){(null!=e||t.value)&&(t.value=e)}function R(t,e,n,c){t.style.setProperty(e,n,c?"important":"")}function T(t,e){for(let n=0;n<t.options.length;n+=1){const c=t.options[n];if(c.__value===e)return void(c.selected=!0)}}function z(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function I(t,e,n){t.classList[n?"add":"remove"](e)}function Y(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}let F,B,G=0,W={};function D(t,e,n,c,s,o,r,i=0){const l=16.666/c;let b="{\n";for(let t=0;t<=1;t+=l){const c=e+(n-e)*o(t);b+=100*t+`%{${r(c,1-c)}}\n`}const a=b+`100% {${r(n,1-n)}}\n}`,u=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)}_${i}`;if(!W[u]){if(!F){const t=k("style");document.head.appendChild(t),F=t.sheet}W[u]=!0,F.insertRule(`@keyframes ${u} ${a}`,F.cssRules.length)}const d=t.style.animation||"";return t.style.animation=`${d?`${d}, `:""}${u} ${c}ms linear ${s}ms 1 both`,G+=1,u}function L(t,e){t.style.animation=(t.style.animation||"").split(", ").filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")).join(", "),e&&!--G&&g(()=>{if(G)return;let t=F.cssRules.length;for(;t--;)F.deleteRule(t);W={}})}function K(t,e,n,o){if(!e)return c;const r=t.getBoundingClientRect();if(e.left===r.left&&e.right===r.right&&e.top===r.top&&e.bottom===r.bottom)return c;const{delay:i=0,duration:l=300,easing:b=s,start:a=O()+i,end:u=a+l,tick:d=c,css:f}=n(t,{from:e,to:r},o);let j,p=!0,g=!1;function h(){f&&L(t,j),p=!1}return x(t=>{if(!g&&t>=a&&(g=!0),g&&t>=u&&(d(1,0),h()),!p)return!1;if(g){const e=0+1*b((t-a)/l);d(e,1-e)}return!0}),f&&(j=D(t,0,1,l,i,b,f)),i||(g=!0),d(0,1),h}function J(t){const e=getComputedStyle(t);if("absolute"!==e.position&&"fixed"!==e.position){const{width:n,height:c}=e,s=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=c,U(t,s)}}function U(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const c=getComputedStyle(t),s="none"===c.transform?"":c.transform;t.style.transform=`${s} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}function X(t){B=t}function Q(){if(!B)throw new Error("Function called outside component initialization");return B}function Z(t){Q().$$.on_mount.push(t)}function tt(t){Q().$$.on_destroy.push(t)}function et(){const t=Q();return(e,n)=>{const c=t.$$.callbacks[e];if(c){const s=Y(e,n);c.slice().forEach(e=>{e.call(t,s)})}}}const nt=[],ct=[],st=[],ot=[],rt=Promise.resolve();let it=!1;function lt(){it||(it=!0,rt.then(dt))}function bt(t){st.push(t)}let at=!1;const ut=new Set;function dt(){if(!at){at=!0;do{for(let t=0;t<nt.length;t+=1){const e=nt[t];X(e),ft(e.$$)}for(nt.length=0;ct.length;)ct.pop()();for(let t=0;t<st.length;t+=1){const e=st[t];ut.has(e)||(ut.add(e),e())}st.length=0}while(nt.length);for(;ot.length;)ot.pop()();it=!1,at=!1,ut.clear()}}function ft(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(bt)}}let jt;function pt(){return jt||(jt=Promise.resolve(),jt.then(()=>{jt=null})),jt}function Ot(t,e,n){t.dispatchEvent(Y(`${e?"intro":"outro"}${n}`))}const gt=new Set;let ht;function mt(){ht={r:0,c:[],p:ht}}function xt(){ht.r||l(ht.c),ht=ht.p}function vt(t,e){t&&t.i&&(gt.delete(t),t.i(e))}function yt(t,e,n,c){if(t&&t.o){if(gt.has(t))return;gt.add(t),ht.c.push(()=>{gt.delete(t),c&&(n&&t.d(1),c())}),t.o(e)}}const $t={duration:0};function wt(t,e,n){let o,r,i=e(t,n),l=!1,a=0;function u(){o&&L(t,o)}function d(){const{delay:e=0,duration:n=300,easing:b=s,tick:d=c,css:f}=i||$t;f&&(o=D(t,0,1,n,e,b,f,a++)),d(0,1);const j=O()+e,p=j+n;r&&r.abort(),l=!0,bt(()=>Ot(t,!0,"start")),r=x(e=>{if(l){if(e>=p)return d(1,0),Ot(t,!0,"end"),u(),l=!1;if(e>=j){const t=b((e-j)/n);d(t,1-t)}}return l})}let f=!1;return{start(){f||(L(t),b(i)?(i=i(),pt().then(d)):d())},invalidate(){f=!1},end(){l&&(u(),l=!1)}}}function kt(t,e,n){let o,r=e(t,n),i=!0;const a=ht;function u(){const{delay:e=0,duration:n=300,easing:b=s,tick:u=c,css:d}=r||$t;d&&(o=D(t,1,0,n,e,b,d));const f=O()+e,j=f+n;bt(()=>Ot(t,!1,"start")),x(e=>{if(i){if(e>=j)return u(0,1),Ot(t,!1,"end"),--a.r||l(a.c),!1;if(e>=f){const t=b((e-f)/n);u(1-t,t)}}return i})}return a.r+=1,b(r)?pt().then(()=>{r=r(),u()}):u(),{end(e){e&&r.tick&&r.tick(1,0),i&&(o&&L(t,o),i=!1)}}}function Ct(t,e,n,o){let r=e(t,n),i=o?0:1,a=null,u=null,d=null;function f(){d&&L(t,d)}function j(t,e){const n=t.b-i;return e*=Math.abs(n),{a:i,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function p(e){const{delay:n=0,duration:o=300,easing:b=s,tick:p=c,css:g}=r||$t,h={start:O()+n,b:e};e||(h.group=ht,ht.r+=1),a?u=h:(g&&(f(),d=D(t,i,e,o,n,b,g)),e&&p(0,1),a=j(h,o),bt(()=>Ot(t,e,"start")),x(e=>{if(u&&e>u.start&&(a=j(u,o),u=null,Ot(t,a.b,"start"),g&&(f(),d=D(t,i,a.b,a.duration,0,b,r.css))),a)if(e>=a.end)p(i=a.b,1-i),Ot(t,a.b,"end"),u||(a.b?f():--a.group.r||l(a.group.c)),a=null;else if(e>=a.start){const t=e-a.start;i=a.a+a.d*b(t/a.duration),p(i,1-i)}return!(!a&&!u)}))}return{run(t){b(r)?pt().then(()=>{r=r(),p(t)}):p(t)},end(){f(),a=u=null}}}const St="undefined"!=typeof window?window:global;function qt(t,e){yt(t,1,1,()=>{e.delete(t.key)})}function Et(t,e){t.f(),qt(t,e)}function Vt(t,e,n,c,s,o,r,i,l,b,a,u){let d=t.length,f=o.length,j=d;const p={};for(;j--;)p[t[j].key]=j;const O=[],g=new Map,h=new Map;for(j=f;j--;){const t=u(s,o,j),i=n(t);let l=r.get(i);l?c&&l.p(t,e):(l=b(i,t),l.c()),g.set(i,O[j]=l),i in p&&h.set(i,Math.abs(j-p[i]))}const m=new Set,x=new Set;function v(t){vt(t,1),t.m(i,a),r.set(t.key,t),a=t.first,f--}for(;d&&f;){const e=O[f-1],n=t[d-1],c=e.key,s=n.key;e===n?(a=e.first,d--,f--):g.has(s)?!r.has(c)||m.has(c)?v(e):x.has(s)?d--:h.get(c)>h.get(s)?(x.add(c),v(e)):(m.add(s),d--):(l(n,r),d--)}for(;d--;){const e=t[d];g.has(e.key)||l(e,r)}for(;f;)v(O[f-1]);return O}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let At;function Ht(t){t&&t.c()}function Pt(t,e,n){const{fragment:c,on_mount:s,on_destroy:o,after_update:i}=t.$$;c&&c.m(e,n),bt(()=>{const e=s.map(r).filter(b);o?o.push(...e):l(e),t.$$.on_mount=[]}),i.forEach(bt)}function _t(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Mt(t,e,n,s,o,r,b=[-1]){const a=B;X(t);const u=e.props||{},d=t.$$={fragment:null,ctx:null,props:r,update:c,not_equal:o,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:i(),dirty:b};let f=!1;d.ctx=n?n(t,u,(e,n,...c)=>{const s=c.length?c[0]:n;return d.ctx&&o(d.ctx[e],d.ctx[e]=s)&&(d.bound[e]&&d.bound[e](s),f&&function(t,e){-1===t.$$.dirty[0]&&(nt.push(t),lt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n}):[],d.update(),f=!0,l(d.before_update),d.fragment=!!s&&s(d.ctx),e.target&&(e.hydrate?d.fragment&&d.fragment.l(function(t){return Array.from(t.childNodes)}(e.target)):d.fragment&&d.fragment.c(),e.intro&&vt(t.$$.fragment),Pt(t,e.target,e.anchor),dt()),X(a)}"function"==typeof HTMLElement&&(At=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){_t(this,1),this.$destroy=c}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}});class Nt{$destroy(){_t(this,1),this.$destroy=c}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}},function(t,e,n){"use strict";var c=n(0);n.d(e,"a",(function(){return c.k})),n.d(e,"b",(function(){return c.J})),n.d(e,"c",(function(){return c.K}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return o}));var c=n(0);function s(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function o(t){const e=t-1;return e*e*e+1}n.d(e,"c",(function(){return c.A}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return o}));var c=n(2);n(0);function s(t,{delay:e=0,duration:n=400,easing:s=c.c}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:s,css:t=>`opacity: ${t*o}`}}function o(t,{delay:e=0,duration:n=400,easing:s=c.b,x:o=0,y:r=0,opacity:i=0}){const l=getComputedStyle(t),b=+l.opacity,a="none"===l.transform?"":l.transform,u=b*(1-i);return{delay:e,duration:n,easing:s,css:(t,e)=>`\n\t\t\ttransform: ${a} translate(${(1-t)*o}px, ${(1-t)*r}px);\n\t\t\topacity: ${b-u*e}`}}},,,,function(t,e){t.exports=class{constructor(t,e){this.format=t,this.fileName=e,this.subs=[]}getSubs(t){return this.subs.filter(e=>e.start<=t&&e.end>=t)}timeToMs(t){const[e,n,c]=t.split(":");return 36e5*+e+6e4*+n+1e3*parseFloat(c)}getAlignmentCandidates(){return this.subs.sort((t,e)=>t.start-e.end).slice(0,20)}}},function(t,e,n){const c=n(7),s=t=>(t.charAt(0).toLowerCase()+t.substring(1)).replace(" ",""),o=t=>{if(t){t=(t=t.replace(/[&H]/g,"")).padStart(8,"0");const[e,n,c,s,o]=t.match(/([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})/i),r=t=>parseInt(t,16);return`rgba(${r(o)}, ${r(s)}, ${r(c)}, ${255-r(n)})`}},r=(t,e,n="transparent",c=0,s=0)=>{const o=t||n;c*=2,s=`${s}px`;const r=[];for(let t=-1*(e=2*(void 0===e?1:e));t<=e;t++)for(let n=-1*e;n<=e;n++)r.push(`${t}px ${n}px ${s} ${o}`);return`text-shadow: ${r.join(", ")}, ${c}px ${c}px ${s} ${n}`},i=t=>`font-family: "${t}", "Source Han Sans", "源ノ角ゴシック", "Hiragino Sans", "HiraKakuProN-W3", "Hiragino Kaku Gothic ProN W3", "Hiragino Kaku Gothic ProN", "ヒラギノ角ゴ ProN W3", "Noto Sans", "Noto Sans CJK JP", "メイリオ", Meiryo, "游ゴシック", YuGothic, "ＭＳ Ｐゴシック", "MS PGothic", "ＭＳ ゴシック", "MS Gothic", sans-serif`,l=(t,e="0vw",n="0vw",c="0vh")=>{const s={1:`top: calc(100vh - ${c}); left: ${e}; transform: translate(0, -100%)`,2:`top: calc(100vh - ${c}); left: 50vw; transform: translate(-50%, -100%)`,3:`top: calc(100vh - ${c}); left: calc(100vw - ${n}); transform: translate(-100%, -100%)`,4:`top: 50vh; left: ${e}; transform: translate(0, -50%)`,5:"top: 50vh; left: 50vw; transform: translate(-50%, -50%)",6:`top: 50vh; left: calc(100vw - ${n}); transform: translate(-100%, -50%)`,7:`top: ${c}; left: ${e}`,8:`top: ${c}; left: 50vw; transform: translateX(-50%)`,9:`top: ${c}; left: calc(100vw - ${n}); transform: translateX(-100%)`},o=t=>`position:fixed;${s[t]}`;return{normal:o(t),inverted:o({1:7,2:8,3:9,4:4,5:5,6:6,7:1,8:2,9:3}[t])}};function b(t,e,n=!1){const c=new RegExp(n?`\\\\${e}\\((.*?)\\)`:`\\\\${e}([^\\\\}]*)`),s=t.match(c);if(s)return{overrides:t.replace(s[0],""),params:n?s[1].split(","):s[1]}}t.exports=class extends c{constructor(t,e){super("ass",e),t=t.replace(/\r\n/g,"\n");try{this.blocks=this.parseBlocks(t),this.subs=this.parseBlock(this.blocks.subs),this.parseInfo(this.blocks.info),this.parseSubTimings(),this.parseStyles(this.parseBlock(this.blocks.styles)),this.parseSubOverrideTags()}catch(t){console.error("ASS PARSE ERROR",t),this.subs=[]}}serialize(){return JSON.stringify({info:this.info,styles:this.styles,subs:this.subs},null,4)}debugInfo(){return[{title:"Number of styles",detail:Object.keys(this.styles).length},{title:"Number of subtitles",detail:this.subs.length}]}parseInfo(){this.info={},this.blocks.info.split("\n").forEach(t=>{const[e,n]=t.split(": ");this.info[s(e)]=n})}scaleHeight(t){return`${t/+this.info.playResY*100}vh`}scaleWidth(t){return`${t/+this.info.playResX*100}vw`}parseBlocks(t){const e=t.split(/\n(?=\[)/),n=t=>e.find(e=>{e=e.trim();const[n,c]=e.match(/^\[(.*?)]/);return c===t}).replace(/.*\n/,"").trim();return{info:n("Script Info"),styles:n("V4+ Styles"),subs:n("Events")}}parseBlock(t){const[e,...n]=t.split("\n"),c=(t,e=1/0)=>{let[n,c,s]=t.match(/(\w*): (.*)/);return s=s.split(","),s.length>e&&(s[e-1]=s.slice(e-1).join(","),s.splice(e,1/0)),{type:c,attributes:s}},o=c(e);return n.reduce((t,e)=>{if(!e||";"===e.charAt(0)||0===e.indexOf("Comment: "))return t;const n=c(e,o.attributes.length),r={dataType:n.type.toLowerCase()};return o.attributes.forEach((t,e)=>{t=t.trim();const c=s(t);r[c]=n.attributes[e]}),r.style="*Default"===r.style?"Default":r.style,t.push(r),t},[])}parseSubTimings(){this.subs.forEach(t=>{t.start=this.timeToMs(t.start),t.end=this.timeToMs(t.end)})}parseStyles(t){const e={};t.forEach(t=>{for(const e of Object.keys(t).filter(t=>/colour/i.test(t)))t[e]=o(t[e]);t.name="*Default"===t.name?"Default":t.name;const n=[],{primaryColour:c,secondaryColour:s,outlineColour:b,backColour:a,borderStyle:u,outline:d,shadow:f,fontname:j,fontsize:p,bold:O,italic:g,underline:h,strikeOut:m,alignment:x,marginL:v,marginR:y,marginV:$}=t;c&&n.push(`color: ${c}`),j&&n.push(i(j)),"1"===u?n.push(r(b,d,a,f)):"3"===u&&n.push(`background-color: ${a}`),"-1"===O&&n.push("font-weight: bold"),"-1"===g&&n.push("font-style: italic"),"-1"!==h&&"-1"!==m||n.push(`text-decoration: ${"-1"===h?"underline":""} ${"-1"===m?"line-through":""}`),n.push(this.genScaledFont(p)),e[t.name]={inline:n.join(";"),verticalAlignment:l(x,this.scaleWidth(v),this.scaleWidth(y),this.scaleHeight($)),raw:t}}),this.styles=e}genScaledFont(t){return`font-size: ${this.scaleHeight(.75*t)}`}parseSubOverrideTags(){this.subs.forEach(t=>{if(t.rawText=t.text,t.text=t.text.replace(/\\N/g,"\n").replace(/\\h/g," "),!/{.+?}/.test(t.text))return;t.phrases=[];const e=t=>t.replace(/{.*?}/g,""),n=function*(t){const e=/({.*?}[^{]*)/g;let n;const c=t.indexOf("{");for(c>0&&(yield t.substring(0,c));null!==(n=e.exec(t));)yield n[1]}(t.text);let c=[];for(const u of n){const n=[],d={text:e(u),fadeIn:0,fadeOut:0,inline:""};let f,j,p,O,g,h=u.match(/{.*?}/),m=h?h[0]:"";function s(t,e=!1,n=(()=>{})){const c=b(m,t,e);c&&(n(c.params),m=c.overrides)}function a(t,e,n){const c=t.map((t,n)=>{const c=Array.isArray(e)?e[n]:e,s=b(m,t,c);if(s)return m=s.overrides,s.params});c.some(t=>void 0!==t)&&n(...c)}if(s("fscx"),s("fscy"),s("an",!1,e=>{const n=this.styles[t.style];t.verticalAlignment=l(e,this.scaleWidth(n.raw.marginL),this.scaleWidth(n.raw.marginR),this.scaleHeight(n.raw.marginV))}),s("3c",!1,t=>{f=t}),s("4c",!1,t=>{j=t}),s("bord",!1,t=>{p=t}),s("shad",!1,t=>{O=t}),s("blur",!1,t=>{g=t}),s("be",!1,t=>{g=t}),[f,j,p,O,g].some(t=>void 0!==t)){const e=this.styles[t.style],n=(t,n)=>void 0!==t?t:e.raw[n];e&&(f=n(o(f),"outlineColour"),j=n(o(j),"backColour"),p=n(p,"outline"),O=n(O,"shadow"),c.push(r(f,p,j,O,g)))}a(["pos","an","org"],[!0,!1,!0],(t,e="5",s)=>{if(t){const[o,r]=t;n.push(`position: fixed; left: ${this.scaleWidth(o)}; top: ${this.scaleHeight(r)}`);const i={1:"50%, -150%",2:"-50%, -150%",3:"-150%, -150%",4:"50%, -50%",5:"-50%, -50%",6:"-150%, -50%",7:"50%, 50%",8:"-50%, 50%",9:"-150%, 50%"}[e];if(n.push(`transform: translate(${i})`),s){const[t,e]=s;c.push(`transform-origin: ${this.scaleWidth(t)} ${this.scaleHeight(e)}`)}}}),a(["frx","fry","frz"],!1,(t,e,s)=>{const o=[],r=(t,e,n=1)=>{if(void 0!==t)return t=parseFloat(t)*n,o.push(`rotate3d(${e.join(", ")}, ${t}deg)`)};r(t,[1,0,0]),r(s,[0,0,1],-1),r(e,[0,1,0]),o.length&&(n.push("perspective: 200px"),c.push(`display: block; transform: ${o.join(" ")}`))}),s("fad",!0,([e,n])=>{d.fadeIn=parseInt(e,10),d.fadeOut=parseInt(n,10),t.end-=n}),s("fsp",!1,t=>{c.push(`letter-spacing: ${t}px`)}),s("fs",!1,t=>{c.push(this.genScaledFont(t))});const x=[];s("u",!1,t=>{x.push("underline")}),s("s",!1,t=>{x.push("line-through")}),c.push(`text-decoration: ${x.length?x.join(" "):"none"}`),s("b",!1,t=>{c.push(`font-weight: ${t?"bold":"normal"}`)}),s("i",!1,t=>{c.push(`font-style: ${t?"italic":"normal"}`)}),s("fn",!1,t=>{c.push(i(t))}),s("1c",!1,t=>{c.push(`color: ${o(t)}`)}),s("r",!1,t=>{if(t){const e=this.styles[t];c=[e.inline]}else c=[]}),d.inline=c.join(";"),t.phrases.push(d),n.length&&(t.inline=n.join(";"))}t.text=e(t.text)})}}},,function(t,e,n){"use strict";n.r(e);var c=n(0),s=n(1);const o=[];function r(t,e=c.H){let n;const s=[];function r(e){if(Object(c.P)(t,e)&&(t=e,n)){const e=!o.length;for(let e=0;e<s.length;e+=1){const n=s[e];n[1](),o.push(n,t)}if(e){for(let t=0;t<o.length;t+=2)o[t][0](o[t+1]);o.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(o,i=c.H){const l=[o,i];return s.push(l),1===s.length&&(n=e(r)||c.H),o(t),()=>{const t=s.indexOf(l);-1!==t&&s.splice(t,1),0===s.length&&(n(),n=null)}}}}function i(t,e,n){const s=!Array.isArray(t),o=s?[t]:t,i=e.length<2;return{subscribe:r(n,t=>{let n=!1;const r=[];let l=0,b=c.H;const a=()=>{if(l)return;b();const n=e(s?r[0]:r,t);i?t(n):b=Object(c.D)(n)?n:c.H},u=o.map((t,e)=>Object(c.W)(t,t=>{r[e]=t,l&=~(1<<e),n&&a()},()=>{l|=1<<e}));return n=!0,a(),function(){Object(c.O)(u),b()}}).subscribe}}const l={subtitleFallbackColor:"#FFFFFF",showSubtitlesOnVideo:!0,pauseWhenTrayOpen:!0,invertVerticalAlignment:!0},b=Object.assign({},l,GM_getValue("settings-store",{})),a={};Object.keys(l).forEach(t=>{(a[t]=r(b[t])).subscribe(e=>{b[t]=e,GM_setValue("settings-store",b)})});const u=a.subtitleFallbackColor,d=a.showSubtitlesOnVideo,f=a.pauseWhenTrayOpen,j=a.invertVerticalAlignment;var p=n(3),O=n(2);function g(t,e,n){const s=getComputedStyle(t),o="none"===s.transform?"":s.transform,r=e.from.width/t.clientWidth,i=e.from.height/t.clientHeight,l=(e.from.left-e.to.left)/r,b=(e.from.top-e.to.top)/i,a=Math.sqrt(l*l+b*b),{delay:u=0,duration:d=(t=>120*Math.sqrt(t)),easing:f=O.b}=n;return{delay:u,duration:Object(c.D)(d)?d(a):d,easing:f,css:(t,e)=>`transform: ${o} translate(${e*l}px, ${e*b}px);`}}function h(t){return"[object Date]"===Object.prototype.toString.call(t)}function m(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map((e,n)=>m(t[n],e));return t=>n.map(e=>e(t))}if("object"===n){if(!t||!e)throw new Error("Object cannot be null");if(h(t)&&h(e)){t=t.getTime();const n=(e=e.getTime())-t;return e=>new Date(t+e*n)}const n=Object.keys(e),c={};return n.forEach(n=>{c[n]=m(t[n],e[n])}),t=>{const e={};return n.forEach(n=>{e[n]=c[n](t)}),e}}if("number"===n){const n=e-t;return e=>t+e*n}throw new Error(`Cannot interpolate ${n} values`)}const x=()=>`last-used-alignment-${v}`;let v="";const y=r(0),$=r(!1),w=r("");w.subscribe(t=>{v=t;const e=GM_getValue(x());y.set(e||0),$.set(null!==e)}),y.subscribe(t=>{GM_setValue(x(),t)});const k=i(y,t=>parseFloat((t/1e3).toFixed(2))),C=i(k,t=>t>0?`+${t}`:t),S=i(k,t=>0===t?"no adjustment":t>0?`delayed by ${t} seconds`:`hastened by ${Math.abs(t)} seconds`);function q(t){let e,n,s,o,r,i,l,b,a,u,d,f,j,p,O,g,h,m,x,v,y,$,w,k,C;return{c(){e=Object(c.t)("div"),n=Object(c.t)("h1"),n.textContent="Fine Alignment",s=Object(c.V)(),o=Object(c.t)("p"),r=Object(c.Y)("Play the video and use these adjustment buttons until the subtitles show at the right time.\n\t\t"),i=Object(c.t)("br"),l=Object(c.V)(),b=Object(c.t)("strong"),a=Object(c.Y)("Alignment: "),u=Object(c.Y)(t[0]),d=Object(c.V)(),f=Object(c.t)("p"),f.textContent="Do the subtitles show...",j=Object(c.V)(),p=Object(c.t)("button"),p.textContent="Way too late?",O=Object(c.V)(),g=Object(c.t)("button"),g.textContent="Too late?",h=Object(c.V)(),m=Object(c.t)("button"),m.textContent="Too early?",x=Object(c.V)(),v=Object(c.t)("button"),v.textContent="Way too early?",y=Object(c.V)(),$=Object(c.t)("br"),w=Object(c.V)(),k=Object(c.t)("button"),k.textContent="Done",Object(c.g)(n,"class","svelte-t5ayh1"),Object(c.g)(p,"class","secondary"),Object(c.g)(g,"class","secondary"),Object(c.g)(m,"class","secondary"),Object(c.g)(v,"class","secondary"),Object(c.g)(e,"class","fine-align svelte-t5ayh1")},m(S,q){Object(c.C)(S,e,q),Object(c.e)(e,n),Object(c.e)(e,s),Object(c.e)(e,o),Object(c.e)(o,r),Object(c.e)(o,i),Object(c.e)(o,l),Object(c.e)(o,b),Object(c.e)(b,a),Object(c.e)(b,u),Object(c.e)(e,d),Object(c.e)(e,f),Object(c.e)(e,j),Object(c.e)(e,p),Object(c.e)(e,O),Object(c.e)(e,g),Object(c.e)(e,h),Object(c.e)(e,m),Object(c.e)(e,x),Object(c.e)(e,v),Object(c.e)(e,y),Object(c.e)(e,$),Object(c.e)(e,w),Object(c.e)(e,k),C=[Object(c.E)(p,"click",t[1](-1*t[3])),Object(c.E)(g,"click",t[1](-1*t[4])),Object(c.E)(m,"click",t[1](t[4])),Object(c.E)(v,"click",t[1](t[3])),Object(c.E)(k,"click",t[5])]},p(t,[e]){1&e&&Object(c.S)(u,t[0])},i:c.H,o:c.H,d(t){t&&Object(c.s)(e),Object(c.O)(C)}}}function E(t,e,n){let o;Object(c.j)(t,S,t=>n(0,o=t));const r=Object(s.a)();return[o,t=>()=>{y.update(e=>e+t)},r,1e3,200,()=>r("close")]}class V extends c.a{constructor(t){var e;super(),document.getElementById("svelte-t5ayh1-style")||((e=Object(c.t)("style")).id="svelte-t5ayh1-style",e.textContent=".fine-align.svelte-t5ayh1{background:rgba(27, 26, 38, 0.9);padding:1rem;color:white;position:fixed;top:50vh;left:50vw;transform:translate(-50%, -50%);max-width:20rem}h1.svelte-t5ayh1{border-bottom:2px solid #f47521}",Object(c.e)(document.head,e)),Object(c.B)(this,t,E,q,c.P,{})}}var A=V;function H(t,e,n){const c=t.slice();return c[35]=e[n],c}function P(t,e,n){const c=t.slice();return c[38]=e[n],c[40]=n,c}function _(t){let e,n,s,o,r,i,l,b,a,u,d,f,j,p,O,g,h,m,x,v,y,$,w,k,C,S,q,E,V,A,_,M,T,z,I,Y,F,B,G,W,D,L,K,J,U,X,Q,Z,tt,et,nt,ct,st,ot,rt,it,lt,bt,at,ut,dt,ft,jt,pt,Ot,gt,ht,mt,xt,vt,yt=[],$t=new Map,wt=t[1].fileName+"",kt=t[0];const Ct=t=>t[38].text;for(let e=0;e<kt.length;e+=1){let n=P(t,kt,e),c=Ct(n);$t.set(c,yt[e]=N(c,n))}let St=t[1].debugInfo(),qt=[];for(let e=0;e<St.length;e+=1)qt[e]=R(H(t,St,e));return{c(){e=Object(c.t)("div"),n=Object(c.t)("button"),s=Object(c.Y)("Recent Subtitles"),r=Object(c.V)(),i=Object(c.t)("button"),l=Object(c.Y)("Settings"),a=Object(c.V)(),u=Object(c.t)("button"),d=Object(c.Y)("Debug"),j=Object(c.V)(),p=Object(c.t)("div"),O=Object(c.t)("h2"),O.textContent="Recent Subtitles",g=Object(c.V)(),h=Object(c.t)("ul");for(let t=0;t<yt.length;t+=1)yt[t].c();m=Object(c.V)(),x=Object(c.t)("div"),v=Object(c.t)("h2"),v.textContent="Settings",y=Object(c.V)(),$=Object(c.t)("div"),w=Object(c.t)("button"),w.textContent="Reselect subtitles",k=Object(c.V)(),C=Object(c.t)("button"),C.textContent="Realign subtitles",S=Object(c.V)(),q=Object(c.t)("button"),q.textContent="Fine alignment adjustment",E=Object(c.V)(),V=Object(c.t)("div"),A=Object(c.t)("label"),A.textContent="Subtitle fallback color:",_=Object(c.V)(),M=Object(c.t)("input"),T=Object(c.V)(),z=Object(c.t)("div"),I=Object(c.t)("input"),Y=Object(c.V)(),F=Object(c.t)("label"),F.textContent="Show subs over video",B=Object(c.V)(),G=Object(c.t)("div"),W=Object(c.t)("input"),D=Object(c.V)(),L=Object(c.t)("label"),L.textContent="Pause when tray is open",K=Object(c.V)(),J=Object(c.t)("div"),U=Object(c.t)("input"),X=Object(c.V)(),Q=Object(c.t)("label"),Q.textContent="Invert subtitle vertical alignment (i.e. if subtitles should be near the bottom this will make them show near the top).\n\t\t\t\t\tYou'll likely want this enabled if you intend to watch with VRV's subtitles at the same time.",Z=Object(c.V)(),tt=Object(c.t)("div"),et=Object(c.t)("h2"),et.textContent="Debug Information",nt=Object(c.V)(),ct=Object(c.t)("dl"),st=Object(c.t)("dt"),st.textContent="Subtitles File",ot=Object(c.t)("dd"),rt=Object(c.Y)(wt),it=Object(c.t)("dt"),it.textContent="Alignment",lt=Object(c.t)("dd"),bt=Object(c.Y)(t[10]),at=Object(c.Y)(" ("),ut=Object(c.Y)(t[11]),dt=Object(c.Y)(")");for(let t=0;t<qt.length;t+=1)qt[t].c();ft=Object(c.V)(),jt=Object(c.t)("div"),pt=Object(c.t)("a"),Ot=Object(c.Y)("⬇ Download Parsed Subtitles"),ht=Object(c.V)(),mt=Object(c.t)("div"),mt.innerHTML='<a target="_blank" href="https://github.com/sheodox/jimaku-player/issues" rel="noopener noreferrer" class="svelte-1ejio6q">Issue? Report it here!</a>',n.disabled=o="recent"===t[3],i.disabled=b="settings"===t[3],u.disabled=f="debug"===t[3],Object(c.g)(e,"class","tray-tab-buttons svelte-1ejio6q"),Object(c.g)(O,"class","svelte-1ejio6q"),Object(c.g)(h,"class","recent-subs svelte-1ejio6q"),Object(c.g)(p,"class","tab tab-recent svelte-1ejio6q"),Object(c.ab)(p,"tab-active","recent"===t[3]),Object(c.g)(v,"class","svelte-1ejio6q"),Object(c.g)(w,"class","secondary"),Object(c.g)(C,"class","secondary"),Object(c.g)(q,"class","secondary"),Object(c.g)($,"class","row svelte-1ejio6q"),Object(c.g)(A,"for","subtitle-color"),Object(c.g)(M,"type","color"),Object(c.g)(M,"id","subtitle-color"),Object(c.g)(V,"class","row svelte-1ejio6q"),Object(c.g)(I,"id","show-subs"),Object(c.g)(I,"type","checkbox"),Object(c.g)(F,"for","show-subs"),Object(c.g)(z,"class","row svelte-1ejio6q"),Object(c.g)(W,"id","pause-on-tray"),Object(c.g)(W,"type","checkbox"),Object(c.g)(L,"for","pause-on-tray"),Object(c.g)(G,"class","row svelte-1ejio6q"),Object(c.g)(U,"id","invert-subtitle-alignment"),Object(c.g)(U,"type","checkbox"),Object(c.g)(Q,"for","invert-subtitle-alignment"),Object(c.g)(J,"class","row svelte-1ejio6q"),Object(c.g)(x,"class","tab tab-settings svelte-1ejio6q"),Object(c.ab)(x,"tab-active","settings"===t[3]),Object(c.g)(et,"class","svelte-1ejio6q"),Object(c.g)(st,"class","svelte-1ejio6q"),Object(c.g)(ot,"class","svelte-1ejio6q"),Object(c.g)(it,"class","svelte-1ejio6q"),Object(c.g)(lt,"class","svelte-1ejio6q"),Object(c.g)(pt,"href",gt=t[15]()),Object(c.g)(pt,"download","parsed-subtitles.json"),Object(c.g)(pt,"class","svelte-1ejio6q"),Object(c.g)(jt,"class","row svelte-1ejio6q"),Object(c.g)(mt,"class","row svelte-1ejio6q"),Object(c.g)(tt,"class","tab tab-debug svelte-1ejio6q"),Object(c.ab)(tt,"tab-active","debug"===t[3])},m(o,b){Object(c.C)(o,e,b),Object(c.e)(e,n),Object(c.e)(n,s),Object(c.e)(e,r),Object(c.e)(e,i),Object(c.e)(i,l),Object(c.e)(e,a),Object(c.e)(e,u),Object(c.e)(u,d),Object(c.C)(o,j,b),Object(c.C)(o,p,b),Object(c.e)(p,O),Object(c.e)(p,g),Object(c.e)(p,h);for(let t=0;t<yt.length;t+=1)yt[t].m(h,null);Object(c.C)(o,m,b),Object(c.C)(o,x,b),Object(c.e)(x,v),Object(c.e)(x,y),Object(c.e)(x,$),Object(c.e)($,w),Object(c.e)($,k),Object(c.e)($,C),Object(c.e)($,S),Object(c.e)($,q),Object(c.e)(x,E),Object(c.e)(x,V),Object(c.e)(V,A),Object(c.e)(V,_),Object(c.e)(V,M),Object(c.T)(M,t[6]),Object(c.e)(x,T),Object(c.e)(x,z),Object(c.e)(z,I),I.checked=t[7],Object(c.e)(z,Y),Object(c.e)(z,F),Object(c.e)(x,B),Object(c.e)(x,G),Object(c.e)(G,W),W.checked=t[8],Object(c.e)(G,D),Object(c.e)(G,L),Object(c.e)(x,K),Object(c.e)(x,J),Object(c.e)(J,U),U.checked=t[9],Object(c.e)(J,X),Object(c.e)(J,Q),Object(c.C)(o,Z,b),Object(c.C)(o,tt,b),Object(c.e)(tt,et),Object(c.e)(tt,nt),Object(c.e)(tt,ct),Object(c.e)(ct,st),Object(c.e)(ct,ot),Object(c.e)(ot,rt),Object(c.e)(ct,it),Object(c.e)(ct,lt),Object(c.e)(lt,bt),Object(c.e)(lt,at),Object(c.e)(lt,ut),Object(c.e)(lt,dt);for(let t=0;t<qt.length;t+=1)qt[t].m(ct,null);Object(c.e)(tt,ft),Object(c.e)(tt,jt),Object(c.e)(jt,pt),Object(c.e)(pt,Ot),Object(c.e)(tt,ht),Object(c.e)(tt,mt),xt=!0,vt=[Object(c.E)(n,"click",t[23]),Object(c.E)(i,"click",t[24]),Object(c.E)(u,"click",t[25]),Object(c.E)(w,"click",t[27]),Object(c.E)(C,"click",t[28]),Object(c.E)(q,"click",t[29]),Object(c.E)(M,"input",t[30]),Object(c.E)(I,"change",t[31]),Object(c.E)(W,"change",t[32]),Object(c.E)(U,"change",t[33])]},p(t,e){if((!xt||8&e[0]&&o!==(o="recent"===t[3]))&&(n.disabled=o),(!xt||8&e[0]&&b!==(b="settings"===t[3]))&&(i.disabled=b),(!xt||8&e[0]&&f!==(f="debug"===t[3]))&&(u.disabled=f),20481&e[0]){const n=t[0];Object(c.z)();for(let t=0;t<yt.length;t+=1)yt[t].r();yt=Object(c.db)(yt,e,Ct,1,t,n,$t,h,c.v,N,null,P);for(let t=0;t<yt.length;t+=1)yt[t].a();Object(c.i)()}if(8&e[0]&&Object(c.ab)(p,"tab-active","recent"===t[3]),64&e[0]&&Object(c.T)(M,t[6]),128&e[0]&&(I.checked=t[7]),256&e[0]&&(W.checked=t[8]),512&e[0]&&(U.checked=t[9]),8&e[0]&&Object(c.ab)(x,"tab-active","settings"===t[3]),(!xt||2&e[0])&&wt!==(wt=t[1].fileName+"")&&Object(c.S)(rt,wt),(!xt||1024&e[0])&&Object(c.S)(bt,t[10]),(!xt||2048&e[0])&&Object(c.S)(ut,t[11]),2&e[0]){let n;for(St=t[1].debugInfo(),n=0;n<St.length;n+=1){const c=H(t,St,n);qt[n]?qt[n].p(c,e):(qt[n]=R(c),qt[n].c(),qt[n].m(ct,null))}for(;n<qt.length;n+=1)qt[n].d(1);qt.length=St.length}8&e[0]&&Object(c.ab)(tt,"tab-active","debug"===t[3])},i(t){if(!xt){for(let t=0;t<kt.length;t+=1)Object(c.bb)(yt[t]);xt=!0}},o(t){for(let t=0;t<yt.length;t+=1)Object(c.cb)(yt[t]);xt=!1},d(t){t&&Object(c.s)(e),t&&Object(c.s)(j),t&&Object(c.s)(p);for(let t=0;t<yt.length;t+=1)yt[t].d();t&&Object(c.s)(m),t&&Object(c.s)(x),t&&Object(c.s)(Z),t&&Object(c.s)(tt),Object(c.r)(qt,t),Object(c.O)(vt)}}}function M(t){let e,n,s,o,r,i;return{c(){e=Object(c.t)("div"),n=Object(c.t)("div"),s=Object(c.t)("button"),s.textContent="Select Subtitles",o=Object(c.V)(),r=Object(c.t)("div"),r.innerHTML='<a target="_blank" href="https://github.com/sheodox/jimaku-player/issues" rel="noopener noreferrer" class="svelte-1ejio6q">Issue? Report it here!</a>',Object(c.g)(n,"class","row svelte-1ejio6q"),Object(c.g)(r,"class","row svelte-1ejio6q"),Object(c.g)(e,"class","tab tab-active tab-cancelled svelte-1ejio6q")},m(l,b){Object(c.C)(l,e,b),Object(c.e)(e,n),Object(c.e)(n,s),Object(c.e)(e,o),Object(c.e)(e,r),i=Object(c.E)(s,"click",t[22])},p:c.H,i:c.H,o:c.H,d(t){t&&Object(c.s)(e),i()}}}function N(t,e){let n,s,o,r,i,l,b,a,u,d,f,j=e[38].text+"",O=c.H;return{key:t,first:null,c(){n=Object(c.t)("li"),s=Object(c.t)("a"),o=Object(c.Y)(j),i=Object(c.V)(),Object(c.g)(s,"target","_blank"),Object(c.g)(s,"href",r=`https://jisho.org/search/${encodeURIComponent(e[38].text.trim())}`),Object(c.g)(s,"rel","noopener noreferrer"),Object(c.g)(s,"class","svelte-1ejio6q"),Object(c.g)(n,"style",l=e[14](e[40])),Object(c.g)(n,"class","svelte-1ejio6q"),this.first=n},m(t,r){Object(c.C)(t,n,r),Object(c.e)(n,s),Object(c.e)(s,o),Object(c.e)(n,i),d=!0,f=Object(c.E)(s,"click",e[26])},p(t,e){(!d||1&e[0])&&j!==(j=t[38].text+"")&&Object(c.S)(o,j),(!d||1&e[0]&&r!==(r=`https://jisho.org/search/${encodeURIComponent(t[38].text.trim())}`))&&Object(c.g)(s,"href",r),(!d||1&e[0]&&l!==(l=t[14](t[40])))&&Object(c.g)(n,"style",l)},r(){u=n.getBoundingClientRect()},f(){Object(c.w)(n),O(),Object(c.d)(n,u)},a(){O(),O=Object(c.l)(n,u,g,{duration:200})},i(t){d||(Object(c.c)(()=>{a&&a.end(1),b||(b=Object(c.o)(n,p.b,{y:-50,duration:200})),b.start()}),d=!0)},o(t){b&&b.invalidate(),a=Object(c.p)(n,p.b,{y:50,duration:200}),d=!1},d(t){t&&Object(c.s)(n),t&&a&&a.end(),f()}}}function R(t){let e,n,s,o,r=t[35].title+"",i=t[35].detail+"";return{c(){e=Object(c.t)("dt"),n=Object(c.Y)(r),s=Object(c.t)("dd"),o=Object(c.Y)(i),Object(c.g)(e,"class","svelte-1ejio6q"),Object(c.g)(s,"class","svelte-1ejio6q")},m(t,r){Object(c.C)(t,e,r),Object(c.e)(e,n),Object(c.C)(t,s,r),Object(c.e)(s,o)},p(t,e){2&e[0]&&r!==(r=t[35].title+"")&&Object(c.S)(n,r),2&e[0]&&i!==(i=t[35].detail+"")&&Object(c.S)(o,i)},d(t){t&&Object(c.s)(e),t&&Object(c.s)(s)}}}function T(t){let e;const n=new A({});return n.$on("close",t[34]),{c(){Object(c.n)(n.$$.fragment)},m(t,s){Object(c.G)(n,t,s),e=!0},p:c.H,i(t){e||(Object(c.bb)(n.$$.fragment,t),e=!0)},o(t){Object(c.cb)(n.$$.fragment,t),e=!1},d(t){Object(c.q)(n,t)}}}function z(t){let e,n,s,o,r,i,l,b,a,u,d;const f=[M,_],j=[];function p(t,e){return"cancelled"===t[2]?0:"normal"===t[2]?1:-1}~(o=p(t))&&(r=j[o]=f[o](t));let O=t[4]&&T(t);return{c(){e=Object(c.t)("div"),n=Object(c.t)("h1"),n.textContent="字幕プレーヤー",s=Object(c.V)(),r&&r.c(),i=Object(c.V)(),l=Object(c.t)("div"),l.innerHTML='<a target="_blank" href="https://discord.gg/2Mz6BR" rel="noopener noreferrer" class="svelte-1ejio6q">Join our Discord for release news and discussion</a>',b=Object(c.V)(),O&&O.c(),a=Object(c.u)(),Object(c.g)(n,"class","svelte-1ejio6q"),Object(c.g)(l,"class","row svelte-1ejio6q"),Object(c.g)(e,"class","tray svelte-1ejio6q"),Object(c.U)(e,"right",t[5]+"rem"),Object(c.ab)(e,"hidden",t[4])},m(r,f){Object(c.C)(r,e,f),Object(c.e)(e,n),Object(c.e)(e,s),~o&&j[o].m(e,null),Object(c.e)(e,i),Object(c.e)(e,l),Object(c.C)(r,b,f),O&&O.m(r,f),Object(c.C)(r,a,f),u=!0,d=[Object(c.E)(e,"mouseenter",t[16](!0)),Object(c.E)(e,"mouseleave",t[16](!1))]},p(t,n){let s=o;o=p(t),o===s?~o&&j[o].p(t,n):(r&&(Object(c.z)(),Object(c.cb)(j[s],1,1,()=>{j[s]=null}),Object(c.i)()),~o?(r=j[o],r||(r=j[o]=f[o](t),r.c()),Object(c.bb)(r,1),r.m(e,i)):r=null),(!u||32&n[0])&&Object(c.U)(e,"right",t[5]+"rem"),16&n[0]&&Object(c.ab)(e,"hidden",t[4]),t[4]?O?(O.p(t,n),Object(c.bb)(O,1)):(O=T(t),O.c(),Object(c.bb)(O,1),O.m(a.parentNode,a)):O&&(Object(c.z)(),Object(c.cb)(O,1,1,()=>{O=null}),Object(c.i)())},i(t){u||(Object(c.bb)(r),Object(c.bb)(O),u=!0)},o(t){Object(c.cb)(r),Object(c.cb)(O),u=!1},d(t){t&&Object(c.s)(e),~o&&j[o].d(),t&&Object(c.s)(b),O&&O.d(t),t&&Object(c.s)(a),Object(c.O)(d)}}}function I(t,e,n){let o,i,l,b,a,p,g;Object(c.j)(t,u,t=>n(6,i=t)),Object(c.j)(t,d,t=>n(7,l=t)),Object(c.j)(t,f,t=>n(8,b=t)),Object(c.j)(t,j,t=>n(9,a=t)),Object(c.j)(t,S,t=>n(10,p=t)),Object(c.j)(t,C,t=>n(11,g=t));const h=Object(s.a)(),x={hidden:-26,shown:0},v=function(t,e={}){const n=r(t);let s,o=t;function i(r,i){if(null==t)return n.set(t=r),Promise.resolve();o=r;let l=s,b=!1,{delay:a=0,duration:u=400,easing:d=O.c,interpolate:f=m}=Object(c.f)(Object(c.f)({},e),i);const j=Object(c.I)()+a;let p;return s=Object(c.F)(e=>{if(e<j)return!0;b||(p=f(t,r),"function"==typeof u&&(u=u(t,r)),b=!0),l&&(l.abort(),l=null);const c=e-j;return c>u?(n.set(t=r),!1):(n.set(t=p(d(c/u))),!0)}),s.promise}return{set:i,update:(e,n)=>i(e(o,t),n),subscribe:n.subscribe}}(x.hidden,{duration:300,easing:O.b});Object(c.j)(t,v,t=>n(5,o=t));let{recentSubs:y=[]}=e,{subtitles:$={}}=e,{mode:w="normal"}=e;let k="recent",q=!1;return t.$set=t=>{"recentSubs"in t&&n(0,y=t.recentSubs),"subtitles"in t&&n(1,$=t.subtitles),"mode"in t&&n(2,w=t.mode)},[y,$,w,k,q,o,i,l,b,a,p,g,h,v,function(t){return`font-size: ${20*(.5+(t+1)/y.length*.5)}px`},function(){const t=new Blob([$.serialize()],{type:"application/json"});return URL.createObjectURL(t)},function(t){return()=>{v.set(t?x.shown:x.hidden),t&&!Object(c.x)(f)||h("tray-pauser",t)}},x,!1,!0,!0,function(t){return e=>{h(t,e.target.checked)}},()=>h("restart"),()=>n(3,k="recent"),()=>n(3,k="settings"),()=>n(3,k="debug"),()=>h("define-pauser"),()=>h("restart"),()=>h("realign"),()=>n(4,q=!0),function(){i=this.value,u.set(i)},function(){l=this.checked,d.set(l)},function(){b=this.checked,f.set(b)},function(){a=this.checked,j.set(a)},()=>n(4,q=!1)]}class Y extends c.a{constructor(t){var e;super(),document.getElementById("svelte-1ejio6q-style")||((e=Object(c.t)("style")).id="svelte-1ejio6q-style",e.textContent='.tray.svelte-1ejio6q.svelte-1ejio6q{width:28rem;margin-top:0.5rem;background:rgba(255, 255, 255, 0.2);position:fixed;right:0;top:0;color:white;height:calc(100% - 5rem);display:flex;flex-direction:column;text-align:center}.tray.svelte-1ejio6q>.svelte-1ejio6q{visibility:hidden}.tray.svelte-1ejio6q.svelte-1ejio6q:hover{background:#111218;overflow:auto;border-radius:3px}.tray.svelte-1ejio6q:hover>.svelte-1ejio6q{visibility:visible}.tray.svelte-1ejio6q h1.svelte-1ejio6q{font-size:2rem;padding:0.5rem 0;border-radius:3px;margin:0}.tray.svelte-1ejio6q h2.svelte-1ejio6q{text-decoration:underline;margin:0 0 0.4rem}ul.svelte-1ejio6q.svelte-1ejio6q{list-style:none;padding:0;display:flex;flex-direction:column-reverse}a.svelte-1ejio6q.svelte-1ejio6q{color:white;transform:scaleY(0);transform-origin:top;transition:transform 0.5s ease;font-family:"Source Han Sans", "源ノ角ゴシック", "Hiragino Sans", "HiraKakuProN-W3", "Hiragino Kaku Gothic ProN W3", "Hiragino Kaku Gothic ProN", "ヒラギノ角ゴ ProN W3", "Noto Sans", "Noto Sans CJK JP", "メイリオ", Meiryo, "游ゴシック", YuGothic, "ＭＳ Ｐゴシック", "MS PGothic", "ＭＳ ゴシック", "MS Gothic", sans-serif}.tab-recent.svelte-1ejio6q a.svelte-1ejio6q:not(:hover){text-decoration:none}a.svelte-1ejio6q.svelte-1ejio6q:hover{color:#0aff8c;cursor:pointer;text-decoration:underline}li.svelte-1ejio6q.svelte-1ejio6q{padding-bottom:0.2rem;white-space:pre}li.svelte-1ejio6q.svelte-1ejio6q:not(:first-of-type)::after{content:\' \';height:0;position:relative;border:1px solid #4a4a6a;display:block;margin:0 auto;border-radius:4px}dt.svelte-1ejio6q.svelte-1ejio6q{font-weight:bold}dd.svelte-1ejio6q.svelte-1ejio6q{font-style:italic}.tab.svelte-1ejio6q.svelte-1ejio6q{display:none;text-align:left;padding:2rem;background:#1c1825;border-top:2px solid #f47521}.tab-active.svelte-1ejio6q.svelte-1ejio6q{display:block;flex:1}.tray-tab-buttons.svelte-1ejio6q.svelte-1ejio6q{margin:0.2rem}.row.svelte-1ejio6q.svelte-1ejio6q:not(:last-child){margin-bottom:0.5rem}.tab-cancelled.svelte-1ejio6q.svelte-1ejio6q{text-align:center}.hidden.svelte-1ejio6q.svelte-1ejio6q{display:none}',Object(c.e)(document.head,e)),Object(c.B)(this,t,I,z,c.P,{recentSubs:0,subtitles:1,mode:2},[-1,-1])}}var F=Y;function B(t,e,n){const c=t.slice();return c[14]=e[n],c}function G(t,e,n){const c=t.slice();return c[11]=e[n],c}function W(t){let e,n,s=[],o=new Map,r=t[0];const i=t=>t[11].text;for(let e=0;e<r.length;e+=1){let n=G(t,r,e),c=i(n);o.set(c,s[e]=J(c,n))}return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=Object(c.u)()},m(t,o){for(let e=0;e<s.length;e+=1)s[e].m(t,o);Object(c.C)(t,e,o),n=!0},p(t,n){if(13&n){const r=t[0];Object(c.z)(),s=Object(c.db)(s,n,i,1,t,r,o,e.parentNode,c.L,J,e,G),Object(c.i)()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Object(c.bb)(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)Object(c.cb)(s[t]);n=!1},d(t){for(let e=0;e<s.length;e+=1)s[e].d(t);t&&Object(c.s)(e)}}}function D(t){let e,n=t[11].text+"";return{c(){e=Object(c.Y)(n)},m(t,n){Object(c.C)(t,e,n)},p(t,s){1&s&&n!==(n=t[11].text+"")&&Object(c.S)(e,n)},i:c.H,o:c.H,d(t){t&&Object(c.s)(e)}}}function L(t){let e,n,s=t[11].phrases,o=[];for(let e=0;e<s.length;e+=1)o[e]=K(B(t,s,e));const r=t=>Object(c.cb)(o[t],1,1,()=>{o[t]=null});return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=Object(c.u)()},m(t,s){for(let e=0;e<o.length;e+=1)o[e].m(t,s);Object(c.C)(t,e,s),n=!0},p(t,n){if(1&n){let i;for(s=t[11].phrases,i=0;i<s.length;i+=1){const r=B(t,s,i);o[i]?(o[i].p(r,n),Object(c.bb)(o[i],1)):(o[i]=K(r),o[i].c(),Object(c.bb)(o[i],1),o[i].m(e.parentNode,e))}for(Object(c.z)(),i=s.length;i<o.length;i+=1)r(i);Object(c.i)()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)Object(c.bb)(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)Object(c.cb)(o[t]);n=!1},d(t){Object(c.r)(o,t),t&&Object(c.s)(e)}}}function K(t){let e,n,s,o,r,i,l=t[14].text+"";return{c(){e=Object(c.t)("span"),n=Object(c.Y)(l),Object(c.g)(e,"style",s=Q(t[14]))},m(t,s){Object(c.C)(t,e,s),Object(c.e)(e,n),i=!0},p(t,o){(!i||1&o)&&l!==(l=t[14].text+"")&&Object(c.S)(n,l),(!i||1&o&&s!==(s=Q(t[14])))&&Object(c.g)(e,"style",s)},i(n){i||(Object(c.c)(()=>{r&&r.end(1),o||(o=Object(c.o)(e,p.a,Z(t[14].fadeIn))),o.start()}),i=!0)},o(n){o&&o.invalidate(),r=Object(c.p)(e,p.a,Z(t[14].fadeOut)),i=!1},d(t){t&&Object(c.s)(e),t&&r&&r.end()}}}function J(t,e){let n,s,o,r,i,l,b,a;const u=[L,D],d=[];function f(t,e){return t[11].phrases?0:1}function j(...t){return e[10](e[11],...t)}return s=f(e),o=d[s]=u[s](e),{key:t,first:null,c(){n=Object(c.t)("p"),o.c(),r=Object(c.V)(),Object(c.g)(n,"style",i=e[3](e[11])),Object(c.g)(n,"data-sub-style",l=e[11].style),Object(c.g)(n,"title","click to search this phrase on Jisho.org"),Object(c.g)(n,"class","svelte-nduvur"),this.first=n},m(t,e){Object(c.C)(t,n,e),d[s].m(n,null),Object(c.e)(n,r),b=!0,a=Object(c.E)(n,"click",j)},p(t,a){let j=s;s=f(e=t),s===j?d[s].p(e,a):(Object(c.z)(),Object(c.cb)(d[j],1,1,()=>{d[j]=null}),Object(c.i)(),o=d[s],o||(o=d[s]=u[s](e),o.c()),Object(c.bb)(o,1),o.m(n,r)),(!b||1&a&&i!==(i=e[3](e[11])))&&Object(c.g)(n,"style",i),(!b||1&a&&l!==(l=e[11].style))&&Object(c.g)(n,"data-sub-style",l)},i(t){b||(Object(c.bb)(o),b=!0)},o(t){Object(c.cb)(o),b=!1},d(t){t&&Object(c.s)(n),d[s].d(),a()}}}function U(t){let e,n,s=t[1]&&W(t);return{c(){e=Object(c.t)("div"),s&&s.c(),Object(c.g)(e,"class","subtitles")},m(t,o){Object(c.C)(t,e,o),s&&s.m(e,null),n=!0},p(t,[n]){t[1]?s?(s.p(t,n),Object(c.bb)(s,1)):(s=W(t),s.c(),Object(c.bb)(s,1),s.m(e,null)):s&&(Object(c.z)(),Object(c.cb)(s,1,1,()=>{s=null}),Object(c.i)())},i(t){n||(Object(c.bb)(s),n=!0)},o(t){Object(c.cb)(s),n=!1},d(t){t&&Object(c.s)(e),s&&s.d()}}}function X(t){return t.filter(t=>!!t).join(";")}function Q(t){return X([t.inline])}function Z(t){return"number"!=typeof t&&(t=0),{delay:0,duration:t}}function tt(t,e,n){let o;Object(c.j)(t,d,t=>n(1,o=t));let{current:r=[]}=e,{styles:i={}}=e,{format:l=""}=e;const b=Object(s.a)();let a,f;const p=[u.subscribe(t=>{a=t}),j.subscribe(t=>{f=t?"inverted":"normal"})];function O(t){b("define-pauser"),window.open(`https://jisho.org/search/${encodeURIComponent(t.trim())}`)}Object(s.b)(()=>{p.forEach(t=>t())});return t.$set=t=>{"current"in t&&n(0,r=t.current),"styles"in t&&n(4,i=t.styles),"format"in t&&n(5,l=t.format)},[r,o,O,function(t){let e=[`color: ${a}`];if("ass"===l&&t.style in i){const n=i[t.style];e.push(n.inline),e.push(n.verticalAlignment[f])}return t.verticalAlignment&&e.push(t.verticalAlignment[f]),e=e.concat([t.inline||""]),X(e)},i,l,a,f,b,p,t=>O(t.text)]}class et extends c.a{constructor(t){var e;super(),document.getElementById("svelte-nduvur-style")||((e=Object(c.t)("style")).id="svelte-nduvur-style",e.textContent='p.svelte-nduvur{cursor:pointer;color:white;margin:0;padding:0;white-space:pre;font-family:"Source Han Sans", "源ノ角ゴシック", "Hiragino Sans", "HiraKakuProN-W3", "Hiragino Kaku Gothic ProN W3", "Hiragino Kaku Gothic ProN", "ヒラギノ角ゴ ProN W3", "Noto Sans", "Noto Sans CJK JP", "メイリオ", Meiryo, "游ゴシック", YuGothic, "ＭＳ Ｐゴシック", "MS PGothic", "ＭＳ ゴシック", "MS Gothic", sans-serif;text-align:center}p.svelte-nduvur:hover{color:#0aff8c !important}',Object(c.e)(document.head,e)),Object(c.B)(this,t,tt,U,c.P,{current:0,styles:4,format:5})}}var nt=et;class ct{constructor(){this.video=null,this.reasons=[]}setVideo(t){this.reasons=[],this.video=t}addPauser(t){this.reasons.includes("user-paused")&&!this.video.paused&&this.reasons.splice(this.reasons.indexOf("user-paused")),0===this.reasons.length&&this.video.paused&&this.reasons.push("user-paused"),this.reasons.push(t),this._checkPause()}removePauser(t){const e=this.reasons.indexOf(t);-1!==e&&(this.reasons.splice(e,1),this._checkPause())}_checkPause(){this.reasons.length?this.video.pause():this.video.play()}}var st=n(8),ot=n.n(st),rt=n(7),it=n.n(rt);const lt={"line-left":"0%",center:"-50%","line-right":"-100%"};class bt extends it.a{constructor(t,e){super("srt",e);const n=t.replace(/\r/g,"").split("\n\n");this.subs=n.reduce((t,e)=>{let n=e.trim().split("\n");function c(){n.shift()}try{/^\d*$/.test(n[0])&&c();let[e,s]=n[0].replace(/,/g,".").match(/^([\d:\.\-> ]*)/)[0].split(/\-\->/),o=n[0].match(/([a-zA-Z].*)/);o=o&&o.length?o[1]:"";let r=[],i=[];const l=n.length-1,b=(t,e)=>{const n=o.match(new RegExp(`${t}:([\\d\\.]*)%`));return n?parseInt(n[1],10):e},a=t=>{const e=o.match(new RegExp(`${t}:([w-]*?)`));if(e)return e[1]},u=()=>{const t=o.match(/position:([\d.]*)%(?:,(\w*))?/);return t?{position:parseInt(t[1]),positionAlignment:"middle"===t[2]?"center":t[2]}:{position:50,positionAlignment:"center"}},d=5;let{position:f,positionAlignment:j="center"}=u(),p=(a("align"),b("line",90-l*d)),O=b("size",100);i.push(`position: fixed; left: ${f}vw`),j&&j in lt&&r.push(`transform: translateX(${lt[j]})`),r.push(`display:block; width: ${O}vw`),c();const g=n.join("\n").replace(/<\/?c.Japanese>/g,"");r.push(`font-size: ${d}vh`),r.push("text-shadow: -4px -4px 0px rgba(9, 9, 9, 255), -4px -3px 0px rgba(9, 9, 9, 255), -4px -2px 0px rgba(9, 9, 9, 255), -4px -1px 0px rgba(9, 9, 9, 255), -4px 0px 0px rgba(9, 9, 9, 255), -4px 1px 0px rgba(9, 9, 9, 255), -4px 2px 0px rgba(9, 9, 9, 255), -4px 3px 0px rgba(9, 9, 9, 255), -4px 4px 0px rgba(9, 9, 9, 255), -3px -4px 0px rgba(9, 9, 9, 255), -3px -3px 0px rgba(9, 9, 9, 255), -3px -2px 0px rgba(9, 9, 9, 255), -3px -1px 0px rgba(9, 9, 9, 255), -3px 0px 0px rgba(9, 9, 9, 255), -3px 1px 0px rgba(9, 9, 9, 255), -3px 2px 0px rgba(9, 9, 9, 255), -3px 3px 0px rgba(9, 9, 9, 255), -3px 4px 0px rgba(9, 9, 9, 255), -2px -4px 0px rgba(9, 9, 9, 255), -2px -3px 0px rgba(9, 9, 9, 255), -2px -2px 0px rgba(9, 9, 9, 255), -2px -1px 0px rgba(9, 9, 9, 255), -2px 0px 0px rgba(9, 9, 9, 255), -2px 1px 0px rgba(9, 9, 9, 255), -2px 2px 0px rgba(9, 9, 9, 255), -2px 3px 0px rgba(9, 9, 9, 255), -2px 4px 0px rgba(9, 9, 9, 255), -1px -4px 0px rgba(9, 9, 9, 255), -1px -3px 0px rgba(9, 9, 9, 255), -1px -2px 0px rgba(9, 9, 9, 255), -1px -1px 0px rgba(9, 9, 9, 255), -1px 0px 0px rgba(9, 9, 9, 255), -1px 1px 0px rgba(9, 9, 9, 255), -1px 2px 0px rgba(9, 9, 9, 255), -1px 3px 0px rgba(9, 9, 9, 255), -1px 4px 0px rgba(9, 9, 9, 255), 0px -4px 0px rgba(9, 9, 9, 255), 0px -3px 0px rgba(9, 9, 9, 255), 0px -2px 0px rgba(9, 9, 9, 255), 0px -1px 0px rgba(9, 9, 9, 255), 0px 0px 0px rgba(9, 9, 9, 255), 0px 1px 0px rgba(9, 9, 9, 255), 0px 2px 0px rgba(9, 9, 9, 255), 0px 3px 0px rgba(9, 9, 9, 255), 0px 4px 0px rgba(9, 9, 9, 255), 1px -4px 0px rgba(9, 9, 9, 255), 1px -3px 0px rgba(9, 9, 9, 255), 1px -2px 0px rgba(9, 9, 9, 255), 1px -1px 0px rgba(9, 9, 9, 255), 1px 0px 0px rgba(9, 9, 9, 255), 1px 1px 0px rgba(9, 9, 9, 255), 1px 2px 0px rgba(9, 9, 9, 255), 1px 3px 0px rgba(9, 9, 9, 255), 1px 4px 0px rgba(9, 9, 9, 255), 2px -4px 0px rgba(9, 9, 9, 255), 2px -3px 0px rgba(9, 9, 9, 255), 2px -2px 0px rgba(9, 9, 9, 255), 2px -1px 0px rgba(9, 9, 9, 255), 2px 0px 0px rgba(9, 9, 9, 255), 2px 1px 0px rgba(9, 9, 9, 255), 2px 2px 0px rgba(9, 9, 9, 255), 2px 3px 0px rgba(9, 9, 9, 255), 2px 4px 0px rgba(9, 9, 9, 255), 3px -4px 0px rgba(9, 9, 9, 255), 3px -3px 0px rgba(9, 9, 9, 255), 3px -2px 0px rgba(9, 9, 9, 255), 3px -1px 0px rgba(9, 9, 9, 255), 3px 0px 0px rgba(9, 9, 9, 255), 3px 1px 0px rgba(9, 9, 9, 255), 3px 2px 0px rgba(9, 9, 9, 255), 3px 3px 0px rgba(9, 9, 9, 255), 3px 4px 0px rgba(9, 9, 9, 255), 4px -4px 0px rgba(9, 9, 9, 255), 4px -3px 0px rgba(9, 9, 9, 255), 4px -2px 0px rgba(9, 9, 9, 255), 4px -1px 0px rgba(9, 9, 9, 255), 4px 0px 0px rgba(9, 9, 9, 255), 4px 1px 0px rgba(9, 9, 9, 255), 4px 2px 0px rgba(9, 9, 9, 255), 4px 3px 0px rgba(9, 9, 9, 255), 4px 4px 0px rgba(9, 9, 9, 255), 2px 2px 0px rgba(20, 20, 20, 195)");const h=l*10;t.push({start:this.timeToMs(e),end:this.timeToMs(s),verticalAlignment:{normal:`position: fixed; top: calc(${p}vh - ${h}px);`,inverted:`position: fixed; top: calc(${100-p}vh + ${h}px); transform: translateY(-100%)`},text:g,inline:i.join("; "),phrases:[{text:g,inline:r.join("; ")}]})}catch(t){}return t},[])}serialize(){return JSON.stringify(this.subs,null,4)}debugInfo(){return[{title:"Number of subtitles",detail:this.subs.length}]}}function at(t){let e,n,s,o,r,i,l;return{c(){e=Object(c.t)("div"),n=Object(c.t)("button"),n.textContent="⨯ Skip Subtitling For This Episode",s=Object(c.V)(),o=Object(c.t)("label"),o.textContent="≡ Select a subtitle file to begin",r=Object(c.V)(),i=Object(c.t)("input"),Object(c.g)(n,"class","small-button secondary svelte-1n5tabm"),Object(c.g)(o,"for","srt-upload"),Object(c.g)(o,"class","svelte-1n5tabm"),Object(c.g)(i,"type","file"),Object(c.g)(i,"id","srt-upload"),Object(c.g)(i,"accept",".srt,.ass,.ssa,.vtt"),Object(c.g)(i,"class","svelte-1n5tabm"),Object(c.g)(e,"class","column svelte-1n5tabm")},m(b,a){Object(c.C)(b,e,a),Object(c.e)(e,n),Object(c.e)(e,s),Object(c.e)(e,o),Object(c.e)(e,r),Object(c.e)(e,i),l=[Object(c.E)(n,"click",t[1]),Object(c.E)(i,"change",t[0])]},p:c.H,i:c.H,o:c.H,d(t){t&&Object(c.s)(e),Object(c.O)(l)}}}function ut(t){const e=Object(s.a)();return[function(t){const n=t.target.files[0],c=new FileReader;c.onload=t=>{const c={ass:ot.a,ssa:ot.a,srt:bt,vtt:bt},[s,o]=n.name.match(/\.(\w{3})$/);e("subtitles-loaded",new c[o](t.target.result,n.name))},c.readAsText(n)},function(){e("cancel")}]}class dt extends c.a{constructor(t){var e;super(),document.getElementById("svelte-1n5tabm-style")||((e=Object(c.t)("style")).id="svelte-1n5tabm-style",e.textContent=".column.svelte-1n5tabm.svelte-1n5tabm{display:flex;flex-direction:column}.column.svelte-1n5tabm>.svelte-1n5tabm{align-self:center;margin:0.5rem}label.svelte-1n5tabm.svelte-1n5tabm{background:#fd0;border:none;cursor:pointer;padding:10px;line-height:1;font-weight:bold;color:black;text-transform:uppercase;display:inline-block;font-size:1.2rem}label.svelte-1n5tabm.svelte-1n5tabm:hover{background:#ffea6d}input.svelte-1n5tabm.svelte-1n5tabm{display:none}",Object(c.e)(document.head,e)),Object(c.B)(this,t,ut,at,c.P,{})}}var ft=dt;const{document:jt}=c.y;function pt(t,e,n){const c=t.slice();return c[21]=e[n],c}function Ot(t){let e,n;return{c(){e=Object(c.t)("button"),e.textContent="← Back",Object(c.g)(e,"class","small-button secondary svelte-1ccfbde")},m(s,o){Object(c.C)(s,e,o),n=Object(c.E)(e,"click",t[17])},p:c.H,d(t){t&&Object(c.s)(e),n()}}}function gt(t){let e,n;return{c(){e=Object(c.t)("button"),e.textContent="↺ Reselect Subtitles",Object(c.g)(e,"class","small-button secondary svelte-1ccfbde")},m(s,o){Object(c.C)(s,e,o),n=Object(c.E)(e,"click",t[16])},p:c.H,d(t){t&&Object(c.s)(e),n()}}}function ht(t){let e,n,s,o,r,i,l,b,a,u,d,f,j,p,O,g,h,m,x,v,y,$,w,k,C,S,q,E,V,A,H,P,_=t[1].text+"",M=t[7],N=[];for(let e=0;e<M.length;e+=1)N[e]=xt(pt(t,M,e));return{c(){e=Object(c.t)("div"),n=Object(c.t)("div"),s=Object(c.t)("h2"),s.textContent="Manual Timing",o=Object(c.V)(),r=Object(c.t)("form"),i=Object(c.t)("label"),i.textContent="Offset subtitle display times (in seconds):",l=Object(c.V)(),b=Object(c.t)("div"),a=Object(c.t)("input"),d=Object(c.V)(),f=Object(c.t)("button"),f.textContent="Use this",j=Object(c.V)(),p=Object(c.t)("p"),p.textContent="Positive numbers will delay subtitles.\n\t\t\t\t\t\tNegative numbers will show the subtitles earlier.",O=Object(c.V)(),g=Object(c.t)("div"),h=Object(c.t)("h2"),h.textContent="Automatic Timing",m=Object(c.V)(),x=Object(c.t)("div"),v=Object(c.t)("div"),y=Object(c.t)("div"),$=Object(c.t)("pre"),w=Object(c.Y)(_),k=Object(c.V)(),C=Object(c.t)("span"),C.textContent="▼",S=Object(c.V)(),q=Object(c.t)("label"),q.textContent="Select a subtitle to align against",E=Object(c.V)(),V=Object(c.t)("select");for(let t=0;t<N.length;t+=1)N[t].c();A=Object(c.V)(),H=Object(c.t)("button"),H.textContent="Play the video and click here when the selected line is said",Object(c.g)(s,"class","svelte-1ccfbde"),Object(c.g)(i,"for","manual-alignment"),Object(c.g)(i,"class","svelte-1ccfbde"),Object(c.g)(a,"type","text"),Object(c.g)(a,"id","manual-alignment"),Object(c.g)(a,"autocomplete","off"),Object(c.g)(a,"class","svelte-1ccfbde"),Object(c.g)(f,"class","svelte-1ccfbde"),Object(c.g)(b,"class","row svelte-1ccfbde"),Object(c.g)(r,"class","column svelte-1ccfbde"),Object(c.g)(p,"class","alignment-sign-hint svelte-1ccfbde"),Object(c.g)(n,"class","column alternate-alignment-choice svelte-1ccfbde"),Object(c.g)(h,"class","svelte-1ccfbde"),Object(c.g)($,"class","svelte-1ccfbde"),Object(c.g)(y,"class","column svelte-1ccfbde"),Object(c.g)(C,"class","column svelte-1ccfbde"),Object(c.g)(v,"class","selection-preview row button secondary svelte-1ccfbde"),Object(c.g)(q,"for","reaction-subtitle-choice"),Object(c.g)(q,"class","sr svelte-1ccfbde"),Object(c.g)(V,"id","reaction-subtitle-choice"),Object(c.g)(V,"class","svelte-1ccfbde"),void 0===t[1]&&Object(c.c)(()=>t[20].call(V)),Object(c.g)(x,"id","reaction-subtitle-chooser"),Object(c.g)(x,"class","svelte-1ccfbde"),Object(c.g)(H,"class","svelte-1ccfbde"),Object(c.g)(g,"class","column alternate-alignment-choice svelte-1ccfbde"),Object(c.g)(e,"class","row svelte-1ccfbde")},m(_,M){Object(c.C)(_,e,M),Object(c.e)(e,n),Object(c.e)(n,s),Object(c.e)(n,o),Object(c.e)(n,r),Object(c.e)(r,i),Object(c.e)(r,l),Object(c.e)(r,b),Object(c.e)(b,a),Object(c.T)(a,t[0]),Object(c.e)(b,d),Object(c.e)(b,f),Object(c.e)(n,j),Object(c.e)(n,p),Object(c.e)(e,O),Object(c.e)(e,g),Object(c.e)(g,h),Object(c.e)(g,m),Object(c.e)(g,x),Object(c.e)(x,v),Object(c.e)(v,y),Object(c.e)(y,$),Object(c.e)($,w),Object(c.e)(v,k),Object(c.e)(v,C),Object(c.e)(x,S),Object(c.e)(x,q),Object(c.e)(x,E),Object(c.e)(x,V);for(let t=0;t<N.length;t+=1)N[t].m(V,null);Object(c.Q)(V,t[1]),Object(c.e)(g,A),Object(c.e)(g,H),P=[Object(c.E)(a,"input",t[19]),Object(c.E)(a,"keydown",t[9]),Object(c.b)(u=yt.call(null,a)),Object(c.E)(r,"submit",Object(c.M)(t[10])),Object(c.E)(V,"change",t[20]),Object(c.E)(H,"click",t[12])]},p(t,e){if(1&e&&a.value!==t[0]&&Object(c.T)(a,t[0]),2&e&&_!==(_=t[1].text+"")&&Object(c.S)(w,_),128&e){let n;for(M=t[7],n=0;n<M.length;n+=1){const c=pt(t,M,n);N[n]?N[n].p(c,e):(N[n]=xt(c),N[n].c(),N[n].m(V,null))}for(;n<N.length;n+=1)N[n].d(1);N.length=M.length}2&e&&Object(c.Q)(V,t[1])},d(t){t&&Object(c.s)(e),Object(c.r)(N,t),Object(c.O)(P)}}}function mt(t){let e,n,s,o,r,i,l,b,a,u,d=t[6]&&function(t){let e,n;return{c(){e=Object(c.Y)("for "),n=Object(c.t)("span"),n.textContent=`${t[6]}`,Object(c.g)(n,"class","show-name svelte-1ccfbde")},m(t,s){Object(c.C)(t,e,s),Object(c.C)(t,n,s)},p:c.H,d(t){t&&Object(c.s)(e),t&&Object(c.s)(n)}}}(t);return{c(){e=Object(c.t)("button"),n=Object(c.Y)("Use the last alignment\n\t\t\t\t\n\t\t\t\t"),d&&d.c(),s=Object(c.V)(),o=Object(c.t)("br"),r=Object(c.Y)("\n\t\t\t\t("),i=Object(c.Y)(t[4]),l=Object(c.Y)(")"),b=Object(c.V)(),a=Object(c.t)("button"),a.textContent="Choose a different alignment...",Object(c.g)(e,"class","svelte-1ccfbde"),Object(c.g)(a,"class","secondary svelte-1ccfbde")},m(f,j){Object(c.C)(f,e,j),Object(c.e)(e,n),d&&d.m(e,null),Object(c.e)(e,s),Object(c.e)(e,o),Object(c.e)(e,r),Object(c.e)(e,i),Object(c.e)(e,l),Object(c.C)(f,b,j),Object(c.C)(f,a,j),u=[Object(c.E)(e,"click",t[11]),Object(c.E)(a,"click",t[18])]},p(t,e){t[6]&&d.p(t,e),16&e&&Object(c.S)(i,t[4])},d(t){t&&Object(c.s)(e),d&&d.d(),t&&Object(c.s)(b),t&&Object(c.s)(a),Object(c.O)(u)}}}function xt(t){let e,n,s,o,r=t[21].text.trim()+"";return{c(){e=Object(c.t)("option"),n=Object(c.Y)(r),s=Object(c.V)(),e.__value=o=t[21],e.value=e.__value},m(t,o){Object(c.C)(t,e,o),Object(c.e)(e,n),Object(c.e)(e,s)},p:c.H,d(t){t&&Object(c.s)(e)}}}function vt(t){let e,n,s,o,r;function i(t,e){return t[2]!==t[8].lastAlignment&&t[3]?Ot:gt}let l=i(t),b=l(t);function a(t,e){return t[2]===t[8].lastAlignment?mt:t[2]===t[8].alternatives?ht:void 0}let u=a(t),d=u&&u(t);return{c(){e=Object(c.t)("div"),n=Object(c.t)("div"),b.c(),s=Object(c.V)(),o=Object(c.t)("h1"),o.textContent="Alignment Adjustment",r=Object(c.V)(),d&&d.c(),Object(c.g)(o,"class","svelte-1ccfbde"),Object(c.g)(n,"class","alignment-panel svelte-1ccfbde"),Object(c.g)(e,"class","column svelte-1ccfbde")},m(t,i){Object(c.C)(t,e,i),Object(c.e)(e,n),b.m(n,null),Object(c.e)(n,s),Object(c.e)(n,o),Object(c.e)(n,r),d&&d.m(n,null)},p(t,[e]){l===(l=i(t))&&b?b.p(t,e):(b.d(1),b=l(t),b&&(b.c(),b.m(n,s))),u===(u=a(t))&&d?d.p(t,e):(d&&d.d(1),d=u&&u(t),d&&(d.c(),d.m(n,null)))},i:c.H,o:c.H,d(t){t&&Object(c.s)(e),b.d(),d&&d.d()}}}function yt(t){t.focus(),t.select()}function $t(t,e,n){let o,r;Object(c.j)(t,$,t=>n(3,o=t)),Object(c.j)(t,S,t=>n(4,r=t));let{subtitles:i}=e;const l=Object(s.a)(),b=Object(c.x)(w),a=i.getAlignmentCandidates(),u={lastAlignment:"last-alignment",alternatives:"alternatives"};let d=Object(c.x)(k),f=a[0],j=Object(c.x)($),p=j?u.lastAlignment:u.alternatives;function O(){const t=parseFloat(d);isNaN(t)?alert("Please enter a valid number!"):g(1e3*t)}function g(t){const e=document.querySelector("video"),n="number"==typeof t?t:1e3*e.currentTime-f.start-400;y.set(n),l("set-align")}return t.$set=t=>{"subtitles"in t&&n(13,i=t.subtitles)},[d,f,p,o,r,l,b,a,u,function(t){t.stopPropagation(),"Enter"===t.key&&O()},O,function(){g(Object(c.x)(y))},g,i,j,function(){p!==u.lastAlignment&&j?n(2,p=u.lastAlignment):l("reselect")},()=>l("reselect"),()=>n(2,p=u.lastAlignment),()=>n(2,p=u.alternatives),function(){d=this.value,n(0,d)},function(){f=Object(c.R)(this),n(1,f),n(7,a)}]}class wt extends c.a{constructor(t){var e;super(),jt.getElementById("svelte-1ccfbde-style")||((e=Object(c.t)("style")).id="svelte-1ccfbde-style",e.textContent=".column.svelte-1ccfbde.svelte-1ccfbde{display:flex;flex-direction:column}button.svelte-1ccfbde.svelte-1ccfbde{margin:0.5rem;align-self:center;max-width:20rem}.row.svelte-1ccfbde.svelte-1ccfbde{display:flex;flex-direction:row;justify-content:center;align-content:center}.row.svelte-1ccfbde button.svelte-1ccfbde{max-width:15rem}.show-name.svelte-1ccfbde.svelte-1ccfbde{font-style:italic}.alignment-panel.svelte-1ccfbde.svelte-1ccfbde{background:rgba(27, 26, 38, 0.9);align-self:center;padding:0.5rem;display:flex;flex-direction:column;border-radius:4px;justify-content:center}.alignment-panel.svelte-1ccfbde>.svelte-1ccfbde:not(select):not(button){color:white}h1.svelte-1ccfbde.svelte-1ccfbde,h2.svelte-1ccfbde.svelte-1ccfbde{margin:0}h1.svelte-1ccfbde.svelte-1ccfbde{font-size:1.3rem;border-bottom:2px solid #f47521}h2.svelte-1ccfbde.svelte-1ccfbde{font-size:1.1rem;border-bottom:2px solid #733a12;margin-bottom:0.2rem}.alternate-alignment-choice+.alternate-alignment-choice.svelte-1ccfbde.svelte-1ccfbde{margin-left:0.5rem;padding-left:0.5rem;border-left:1px solid white}p.svelte-1ccfbde.svelte-1ccfbde,label.svelte-1ccfbde.svelte-1ccfbde{max-width:14rem}.alignment-sign-hint.svelte-1ccfbde.svelte-1ccfbde{font-size:0.8rem}#manual-alignment.svelte-1ccfbde.svelte-1ccfbde{width:5rem;align-self:center}.alternate-alignment-choice.svelte-1ccfbde.svelte-1ccfbde:not(:hover){opacity:0.6}@media(max-width: 700px){button.svelte-1ccfbde.svelte-1ccfbde,input.svelte-1ccfbde.svelte-1ccfbde,label.svelte-1ccfbde.svelte-1ccfbde,pre.svelte-1ccfbde.svelte-1ccfbde{font-size:0.7rem !important}.alignment-sign-hint.svelte-1ccfbde.svelte-1ccfbde{font-size:0.6rem}button.svelte-1ccfbde.svelte-1ccfbde{padding:4px}}#reaction-subtitle-chooser.svelte-1ccfbde.svelte-1ccfbde{position:relative;cursor:pointer}#reaction-subtitle-chooser.svelte-1ccfbde pre.svelte-1ccfbde,span.svelte-1ccfbde.svelte-1ccfbde{align-self:center;pointer-events:none}#reaction-subtitle-chooser.svelte-1ccfbde span.svelte-1ccfbde{margin-left:1rem}#reaction-subtitle-chooser.svelte-1ccfbde pre.svelte-1ccfbde{z-index:1;position:relative;margin:0;font-size:1.1rem}#reaction-subtitle-chooser.svelte-1ccfbde select.svelte-1ccfbde{height:100%;position:absolute;top:0;left:0;opacity:0}",Object(c.e)(jt.head,e)),Object(c.B)(this,t,$t,vt,c.P,{subtitles:13})}}var kt=wt;const{document:Ct}=c.y;function St(t){let e;const n=new F({props:{mode:"cancelled"}});return n.$on("restart",t[5]),{c(){Object(c.n)(n.$$.fragment)},m(t,s){Object(c.G)(n,t,s),e=!0},p:c.H,i(t){e||(Object(c.bb)(n.$$.fragment,t),e=!0)},o(t){Object(c.cb)(n.$$.fragment,t),e=!1},d(t){Object(c.q)(n,t)}}}function qt(t){let e,n;const s=new nt({props:{format:t[2].format,styles:t[2].styles,current:t[1],currentTime:t[4]}});s.$on("define-pauser",t[9]);const o=new F({props:{recentSubs:t[3],subtitles:t[2]}});return o.$on("restart",t[5]),o.$on("tray-pauser",t[8]),o.$on("define-pauser",t[9]),o.$on("realign",t[18]),{c(){Object(c.n)(s.$$.fragment),e=Object(c.V)(),Object(c.n)(o.$$.fragment)},m(t,r){Object(c.G)(s,t,r),Object(c.C)(t,e,r),Object(c.G)(o,t,r),n=!0},p(t,e){const n={};4&e&&(n.format=t[2].format),4&e&&(n.styles=t[2].styles),2&e&&(n.current=t[1]),s.$set(n);const c={};8&e&&(c.recentSubs=t[3]),4&e&&(c.subtitles=t[2]),o.$set(c)},i(t){n||(Object(c.bb)(s.$$.fragment,t),Object(c.bb)(o.$$.fragment,t),n=!0)},o(t){Object(c.cb)(s.$$.fragment,t),Object(c.cb)(o.$$.fragment,t),n=!1},d(t){Object(c.q)(s,t),t&&Object(c.s)(e),Object(c.q)(o,t)}}}function Et(t){let e;const n=new kt({props:{subtitles:t[2]}});return n.$on("set-align",t[6]),n.$on("reselect",t[17]),{c(){Object(c.n)(n.$$.fragment)},m(t,s){Object(c.G)(n,t,s),e=!0},p(t,e){const c={};4&e&&(c.subtitles=t[2]),n.$set(c)},i(t){e||(Object(c.bb)(n.$$.fragment,t),e=!0)},o(t){Object(c.cb)(n.$$.fragment,t),e=!1},d(t){Object(c.q)(n,t)}}}function Vt(t){let e;const n=new ft({});return n.$on("subtitles-loaded",t[7]),n.$on("cancel",t[16]),{c(){Object(c.n)(n.$$.fragment)},m(t,s){Object(c.G)(n,t,s),e=!0},p:c.H,i(t){e||(Object(c.bb)(n.$$.fragment,t),e=!0)},o(t){Object(c.cb)(n.$$.fragment,t),e=!1},d(t){Object(c.q)(n,t)}}}function At(t){let e,n,s,o;const r=[Vt,Et,qt,St],i=[];function l(t,e){return"prompt"===t[0]?0:"align"===t[0]?1:"play"===t[0]?2:"cancelled"===t[0]?3:-1}return~(n=l(t))&&(s=i[n]=r[n](t)),{c(){e=Object(c.t)("div"),s&&s.c(),Object(c.g)(e,"class","subtitles-app svelte-1ffcyis")},m(t,s){Object(c.C)(t,e,s),~n&&i[n].m(e,null),o=!0},p(t,[o]){let b=n;n=l(t),n===b?~n&&i[n].p(t,o):(s&&(Object(c.z)(),Object(c.cb)(i[b],1,1,()=>{i[b]=null}),Object(c.i)()),~n?(s=i[n],s||(s=i[n]=r[n](t),s.c()),Object(c.bb)(s,1),s.m(e,null)):s=null)},i(t){o||(Object(c.bb)(s),o=!0)},o(t){Object(c.cb)(s),o=!1},d(t){t&&Object(c.s)(e),~n&&i[n].d()}}}function Ht(t,e,n){const c=new ct;let o="prompt",r=[],i=null,l=null,b=-1,a=[];function u(){n(0,o="prompt"),n(2,i=null),n(1,r=[])}function d(t){let e=t[t.length-1],c=a[a.length-1];!e||c&&e.text===c.text||n(3,a=[...a,e]),a.length>10&&n(3,a=a.slice(a.length-10))}function f(){"play"===o&&(n(1,r=i.getSubs(1e3*l.currentTime-b)),d(r),requestAnimationFrame(f))}y.subscribe(t=>b=t),Object(s.c)(()=>{document.addEventListener("visibilitychange",()=>{document.hidden||c.removePauser("define")});let t="",e="";setInterval(()=>{const n=document.querySelector("video").getAttribute("src");n&&n!==t&&(t=n,u());const c=document.querySelector(".video-title"),s=c?c.textContent:"";s!==e&&(e=s,w.set(s))},50)});return[o,r,i,a,"",u,function(){l=document.querySelector("video"),c.setVideo(l),n(3,a=[]),n(0,o="play"),f()},function(t){n(2,i=t.detail),0===i.subs.length?(console.log("subtitles object failed to parse: ",i),alert("No subtitles were able to be parsed from the selected subtitle file, verify nothing is wrong with the file. If it appears normal please submit a bug report with the episode and the subtitles file you used to the issue tracker (a link can be found in the tray on the right side of the video player)!"),n(0,o="cancelled")):n(0,o="align")},function(t){t.detail?c.addPauser("tray"):c.removePauser("tray")},function(){c.addPauser("define")},l,b,"last-used-alignment",c,d,f,()=>n(0,o="cancelled"),()=>n(0,o="prompt"),()=>n(0,o="align")]}class Pt extends c.a{constructor(t){var e;super(),Ct.getElementById("svelte-1ffcyis-style")||((e=Object(c.t)("style")).id="svelte-1ffcyis-style",e.textContent='.subtitles-app.svelte-1ffcyis{position:relative;font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;text-align:center}.subtitles-app.svelte-1ffcyis>*{z-index:1000000000}.subtitles-app.svelte-1ffcyis button,.subtitles-app.svelte-1ffcyis .button{background:#fd0;border:none;padding:10px;line-height:1;font-weight:bold;color:black;text-transform:uppercase;font-size:0.9rem;margin-bottom:0.2rem}.subtitles-app.svelte-1ffcyis .small-button{font-size:0.6rem}.subtitles-app.svelte-1ffcyis button:disabled,.subtitles-app.svelte-1ffcyis .button:disabled{background:#2a3450}.subtitles-app.svelte-1ffcyis button.secondary,.subtitles-app.svelte-1ffcyis .button.secondary{background:#11121863;border:1px solid #fd0;color:#fd0}.subtitles-app.svelte-1ffcyis button:not(:disabled):hover,.subtitles-app.svelte-1ffcyis .button:not(:disabled):hover{background:#ffea6d;cursor:pointer;color:black}.subtitles-app.svelte-1ffcyis .sr{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}',Object(c.e)(Ct.head,e)),Object(c.B)(this,t,Ht,At,c.P,{})}}var _t=Pt;const Mt=document.createElement("div");location.host.includes("crunchyroll")?document.getElementById("vilosRoot").appendChild(Mt):document.body.appendChild(Mt),Mt.id="sheodox-jimaku-player",Mt.style.position="fixed",Mt.style.width="100%";new _t({target:Mt})}]);
